
Помимо того, что данные на сервер можно передавать через _body_, которое используется при _POST_ запросах и отправке форм, мы также можем передать так называемую строку запроса _query string_. Это параметры _ключ=значение_, которые располагаются в _request line_ после указания глагола _POST_ или _GET_.

```
POST /login?key=value HTTP/1.1
```

Стоит сказать, что указатель на конкретную страницу может отсутствовать и параметры можно передавать на основную страницу домена.

```
GET /?key=value HTTP/1.1
```

_query string_ имеет такой же формат как и строка в _body_ при _POST_ запросе, только в начале ставится знак `?`. После него мы можем передавать параметры `key=value&key2=value2` и так далее.

![[Pasted image 20230212151300.png]]

Параметры _query string_ не имеют никакого отношения к _GET_-запросам, хотя многие разработчики называют их _GET_-параметрами. На собеседованиях иногда задают вопрос: "Можно ли одновременно отправить _POST_ и _GET_ параметры?". Правильный ответ — конечно можно, так как никакой связи между ними нет. Более того, в некоторых языках существуют способы получения этих данных отдельно друг от друга. Например, в PHP есть глобальный массив `$_REQUEST`, в который попадают как параметры, переданные через _query string_, так и переданные в _POST_.

Но как понять, когда и для чего использовать _query string_? Для этого нужно определить, что на самом деле значат глаголы HTTP. Семантика HTTP-глаголов выражается не только в том, какой вам будет возвращен ответ, а еще и в том, как можно с ним работать. Глагол _GET_ считается идемпотентным. Это означает, что его повторное выполнение всегда возвращает один и тот же результат, т.е. это обычный запрос. Мы спрашиваем систему о чем-то, она возвращает нам данные и при этом не изменяет своего внутреннего состояния. Таким образом любой повторный запрос отработает точно так же — детерминировано. В качестве аналогии можно привести чистую функцию. В реальности состояние системы конечно же может поменяться и мы не можем это контролировать, поэтому кэширование не является тривиальной задачей.

_POST_-запрос, напротив, не является идемпотентным и предназначен для изменения данных. Таким образом повторный запрос может приводить к другим результатам. Если первым _POST_-запросом мы удаляем данные, то вторым получим ошибку _404_. Такие запросы никогда не кешируются.

Поисковые роботы ходят по сайтам только по _GET_-ссылкам, так как они учитывают семантику и знают, что _GET_-запросы можно делать безболезненно и с сайтом ничего страшного не произойдет.

Параметры _query string_ в _GET_-запросах используются при работе с формами, которые бывают как минимум двух типов: на изменение, создание или добавление данных и на их выборку. Именно при разработке второго типа форм и используется _query string_. Это может быть какая-то фильтрация или поисковая форма. Если мы в поисковике наберем запрос, например, какое-то слово и нажмем кнопку _Поиск_, то увидим, что нас отправит на страницу, в URI которой будет отправлен _query string_. Это очень важный момент, так как именно благодаря этому мы не производим никаких изменений и можем дать ссылку на этот запрос. Очень важно придерживаться семантики глаголов. Например, в некоторых старых банковских системах запросы почему-то реализовывались через _POST_. При таком подходе нельзя не только дать ссылку на запрос, но даже простое обновление страницы с помощью F5 приводит к повторной отправке данных.